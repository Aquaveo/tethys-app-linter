name: tethys-app-linter

on: [release]

jobs:
  lint:
    runs-on: ubuntu-latest
    name: Lint
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Run tethys-app-linter
      uses: Aquaveo/tethys-app-linter@v1
  flake:
    runs-on: ubuntu-latest
    name: Flake8
    needs: lint
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: "3.8"
    - name: Run flake
      uses: julianwachholz/flake8-action@v2
      with:
        checkName: "Flake8"
        path: ${{ github.workspace }}
        config: /tox.ini
